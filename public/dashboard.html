<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>PWAGram</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.3.0/material.indigo-pink.min.css" />
  <link rel="stylesheet" href="/src/css/app.css" />
  <link rel="manifest" href="/manifest.json" />
</head>

<body>
    <div id="app">
        <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
            <header class="mdl-layout__header">
                <div class="mdl-layout__header-row">
                    <!-- Title -->
                    <img class="img-logo" src="src/images/icon_payso.png" alt="" srcset="">
                    <span class="mdl-layout-title">Pay Solutions</span>
                    <!-- Add spacer, to align navigation to the right -->
                    <div class="mdl-layout-spacer"></div>
                    <!-- Navigation. We hide it in small screens. -->
                    <nav class="mdl-navigation mdl-layout--large-screen-only">
                        <div class="drawer-option">
                            <button 
                                class="enable-notifications mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-color--accent">
                                Enable Notifications
                            </button>
                            <button
                                class="enable-notifications mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-color--accent">
                                Log out
                            </button>
                        </div>
                    </nav>
                </div>
            </header>
            <div class="mdl-layout__drawer">

                <span class="mdl-layout-title">Pay Solutions</span>
                <nav class="mdl-navigation">
                    <div class="drawer-option">
                        <button 
                            class="enable-notifications mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-color--accent">
                            Enable Notifications
                        </button>
                        <button
                        class="enable-notifications mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-color--accent">
                        Log out
                    </button>
                    </div>
                </nav>
            </div>
            <main class="mdl-layout__content mat-typography">
                <div class="box-body">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-4 side_bar">
                                <div class="user_profile_card">
                                    <div class="user_profile_img">
                                        <img src="https://www.paysolutions.asia/assets/images-webp/home-webp/icon-credit@2x.webp"
                                            alt="user_image" class="user_profile_avtaar" width="60">
                                    </div>
                                    <div class="user_details">
                                        <div class="user_profile_name">
                                            <h5>ยืนยันการชำระเงิน</h5>
                                        </div>
                                        <div class="user_profile_userID">
                                            <h5>RefNO :<span> 202305222038</span></h5>
                                        </div>
                                        <div class="user_profile_mail">
                                            <h5>Total : 3500 บาท</h5>
                                        </div>
                                        <div class="user_designation">
                                            <h5>ช่องทาง : VISA</h5>
                                        </div>
                                    </div>
                                    <div class="circle_decor1"></div>
                                    <div class="circle_decor2"></div>
                                    <div class="circle_decor3"></div>
                                </div>
                            </div>
                            <div class="col-md-4 side_bar">
                                <div class="user_profile_card">
                                    <div class="user_profile_img">
                                        <img src="https://www.paysolutions.asia/assets/images-webp/payment-webp/icon-qr@2x.webp"
                                            alt="user_image" class="user_profile_avtaar" width="60">
                                    </div>
                                    <div class="user_details">
                                        <div class="user_profile_name">
                                            <h5>ยืนยันการชำระเงิน</h5>
                                        </div>
                                        <div class="user_profile_userID">
                                            <h5>RefNO :<span> 202305222038</span></h5>
                                        </div>
                                        <div class="user_profile_mail">
                                            <h5>Total : 100 บาท</h5>
                                        </div>
                                        <div class="user_designation">
                                            <h5>ช่องทาง : Promptpay</h5>
                                        </div>
                                    </div>
                                    <div class="circle_decor1"></div>
                                    <div class="circle_decor2"></div>
                                    <div class="circle_decor3"></div>
                                </div>
                            </div>
                            <div class="col-md-4 side_bar">
                                <div class="user_profile_card">
                                    <div class="user_profile_img">
                                        <img src="https://i.pinimg.com/originals/f5/3d/58/f53d58e983d9f5861bc1c922b2290512.png"
                                            alt="user_image" class="user_profile_avtaar" width="60">
                                    </div>
                                    <div class="user_details">
                                        <div class="user_profile_name">
                                            <h5>ยืนยันการชำระเงิน</h5>
                                        </div>
                                        <div class="user_profile_userID">
                                            <h5>RefNO :<span> 202305222038</span></h5>
                                        </div>
                                        <div class="user_profile_mail">
                                            <h5>Total : 150 บาท</h5>
                                        </div>
                                        <div class="user_designation">
                                            <h5>ช่องทาง : True Money Wallet</h5>
                                        </div>
                                    </div>
                                    <div class="circle_decor1"></div>
                                    <div class="circle_decor2"></div>
                                    <div class="circle_decor3"></div>
                                </div>
                            </div>
                            <div class="col-md-4 side_bar">
                                <div class="user_profile_card">
                                    <div class="user_profile_img">
                                        <img src="https://www.paysolutions.asia/assets/images-webp/payment-webp/icon-alipay@2x.webp"
                                            alt="user_image" class="user_profile_avtaar" width="60">
                                    </div>
                                    <div class="user_details">
                                        <div class="user_profile_name">
                                            <h5>ยืนยันการชำระเงิน</h5>
                                        </div>
                                        <div class="user_profile_userID">
                                            <h5>RefNO :<span> 202305222038</span></h5>
                                        </div>
                                        <div class="user_profile_mail">
                                            <h5>Total : 90 บาท</h5>
                                        </div>
                                        <div class="user_designation">
                                            <h5>ช่องทาง : Alipay</h5>
                                        </div>
                                    </div>
                                    <div class="circle_decor1"></div>
                                    <div class="circle_decor2"></div>
                                    <div class="circle_decor3"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script src="/src/js/material.min.js"></script>
  <script src="/src/js/app.js"></script>
  <script src="/src/js/pushapi.js"></script>
  <script type="text/javascript">
    function checkLogin(data, username) {
      const obj = JSON.parse(data);
      console.log("Login ==> " + obj.result)
      if (obj.message != "fail" && obj.result != false) {
        var myHeaders = new Headers();
        myHeaders.append("apikey", "JpywR23@W8");

        var requestOptions = {
          method: 'GET',
          headers: myHeaders,
          redirect: 'follow'
        };

        fetch("https://apis.paysolutions.asia/auth/users/search/findByUserName/?userName=" + username, requestOptions)
          .then(response => response.text())
          .then(result => checkMerchant(result)) //console.log(result)
          .catch(error => errorLogin());
      } else {
        errorLogin()
      }
    }
    function checkMerchant(data) {
      const obj = JSON.parse(data);
      if(obj.merchantId != null && obj.merchantId > 0) {
          window.localStorage.setItem('mid', obj.merchantId)
          window.location.href = '/dashboard.html';
      }
    }

    function errorLogin() {
      const modal = document.getElementById("modal-one");
      modal.classList.add("open");
      modal.classList.add("modal-show");
    }

    document.addEventListener('click', function (event) {
      if (!event.target.matches('.modal-exit')) return;
      const modal = document.getElementById("modal-one");
      modal.classList.remove("open");
      modal.classList.remove("modal-show");
    }, false);

    // function checkUser() {
    //     console.log("test")
    //     merchantid = window.localStorage.getItem('mid')
    //     if (merchantid == null) {
    //         window.location.href = '/index.html';
    //     }else{
    //         window.location.href = '/dashboard.html';
    //     }
    // }

    // checkUser();
  </script>
  
  
  <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"
    integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+"
    crossorigin="anonymous"></script>
  <script>
    var socket = io("https://classification-upgrading-inter-encoding.trycloudflare.com");
    socket.on('chat message', function (msg) {
      displayConfirmNotification(msg)
    });
  </script>
</body>

</html>